# apache_camel_project  

#### 3. Apache Camel  
https://github.com/k0r0tk0ff/Links-JAVA-study/edit/master/PLANE_ESB  

EIP.  
https://www.enterpriseintegrationpatterns.com/patterns/messaging/index.html  
https://github.com/k0r0tk0ff/Links-JAVA-study/blob/master/ESB/%D0%A1%D1%82%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D0%B8%20%D0%BA%D0%BE%D1%80%D0%BF%D0%BE%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D1%85%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9.txt  

Обзор функциональности и архитектуры.  
Exchange, Message  
Описание маршрутов в Java DSL и Spring DSL.  
Стандартные компоненты Apache Camel (file, jms, http). Конвертеры типов.  
Добавление бизнес логики в маршруты (beans, processors).  
Обработка исключений.  
Конфигурирование менеджера распределенных транзакций для использования в маршрутах.  
 Задача 
Есть папка с файлами.  
При помощи средств Apache Camel реализовать следующий процесс: файл достается из папки, далее,  
в зависимости от типа, выполняются некоторые действия.  
Если файл имеет расширение xml, то его необходимо его содержимое отправить в очередь в брокере ActiveMQ.  
Если он имеет расширение txt, то его необходимо отправить в брокер, а так же записать в таблицу в БД.  
Если расширение другое - выбрасывается исключение и отправлять файл в очередь invalid-queue в ActiveMQ.  
При обработке каждого сотого файла отсылать письмо, содержащее количество файлов txt, количество файлов xml,  
количество нераспознанных файлов, а так же время обработки пачки сообщений.  
Для гарантированной доставки следует сконфигурировать и подключить менеджер распределенных транзакций (Bitronix TM).  
Предполагаемое время решения - 10-15 ч.

